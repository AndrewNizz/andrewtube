<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AndrewTube</title>
    <link href="{{ url_for('static', filename='favicon.ico') }}" rel="icon">
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
          crossorigin="anonymous">
    <link href="{{ url_for('static', filename='main_styles.css') }}" rel="stylesheet">
</head>
<body>
    <!-- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ -->
    <header class="top-bar">
        <h2>AndrewTube</h2>
        <div class="outer-bar">
            <div class="search-bar">
                <form>
                    <input type="text" placeholder="–ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ..." />
                    <button type="submit"><img src="../templates/static/lupa_icon.png" alt="–ø–æ–∏—Å–∫" width="30" height="30"></button>
                </form>
            </div>
        </div>
        <button id="themeSwitcher" class="theme-toggle">üåô</button>
    </header>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
    <main class="page-container">
        {% block content %}
        {% endblock %}
    </main>
    <aside class="navigation-panel">
        <div class="profile-info">
            <div class="profile-pic"></div>
                {% if current_user.is_authenticated %}
                    <a href="/" class="username">{{ current_user.name }}</a>
                {% else %}
                    <p>
                        <a class="btn btn-light" href="/user/register">Sign up</a>
                        <a class="btn btn-outline-success" href="/user/login">Log in</a>
                    </p>
                {% endif %}
        </div>
        <div>
            <a href="/video/add">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"/>
                </svg>
            </a>
        </div>
    </aside>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const themeSwitcher = document.getElementById("themeSwitcher");
            const body = document.body;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Ç–µ–º—É
            const savedTheme = localStorage.getItem("theme");
            if (savedTheme === "dark") {
                body.classList.add("dark-theme");
                themeSwitcher.textContent = "‚òÄÔ∏è";
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—é
            themeSwitcher.addEventListener("click", function () {
                body.classList.toggle("dark-theme");
                const newTheme = body.classList.contains("dark-theme")
                    ? "dark"
                    : "light";
                localStorage.setItem("theme", newTheme);
                themeSwitcher.textContent =
                    newTheme === "dark" ? "‚òÄÔ∏è" : "üåô";
            });

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π —Ç–µ–º—ã)
            if (
                !savedTheme &&
                window.matchMedia &&
                window.matchMedia("(prefers-color-scheme: dark)").matches
            ) {
                body.classList.add("dark-theme");
                themeSwitcher.textContent = "‚òÄÔ∏è";
            }
        });
    </script>
</body>
</html>